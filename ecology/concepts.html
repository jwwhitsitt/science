<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ecology Concepts</title>
<link rel="stylesheet" href="../styles/header.css">
<style>
  body{margin:0;font-family:system-ui;background:#f4f6fb}
  .wrap{max-width:760px;margin:0 auto;padding:16px}
  .card{background:#fff;border-radius:16px;padding:14px;margin-bottom:10px;box-shadow:0 10px 24px rgba(0,0,0,.1)}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  .btn{border:0;border-radius:14px;padding:10px 12px;font-weight:900;cursor:pointer;background:#0f172a;color:#fff;box-shadow:0 10px 20px rgba(0,0,0,.10)}
  .btn.secondary{background:#e5e7eb;color:#111827;box-shadow:none}
  .btn:disabled{opacity:.55;cursor:not-allowed;box-shadow:none}
  .tiny{font-size:12px;font-weight:800;color:#475569;margin-top:6px}
  .meta{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;color:#475569;font-weight:900;font-size:13px;margin-bottom:10px}
  .q{background:#fff;border-radius:16px;padding:14px;box-shadow:0 10px 24px rgba(0,0,0,.1)}
  .q h3{margin:0 0 10px;font-size:15px;font-weight:1000}
  .choices{display:grid;gap:8px}
  .choiceBtn{border:0;border-radius:14px;padding:10px 12px;font-weight:900;cursor:pointer;background:#e5e7eb;color:#111827;text-align:left}
  .choiceBtn:disabled{cursor:not-allowed;opacity:.9}
  .choiceBtn.correct{background:rgba(22,163,74,.16);color:#14532d;box-shadow: inset 0 0 0 2px rgba(22,163,74,.35)}
  .choiceBtn.wrong{background:rgba(220,38,38,.14);color:#7f1d1d;box-shadow: inset 0 0 0 2px rgba(220,38,38,.25)}
</style>
</head>
<body>
<header class="k-hdr">
  <div class="bar">
    <div class="left"><button class="back-btn" onclick="history.back()">‚Üê Back</button></div>
    <div class="center">Science</div>
    <a class="home-link" href="https://kitimus.com/">Home</a>
  </div>
  <div class="k-mascot"><img src="/mascots/kitimus/kitimus-neutral.png" alt="Kitimus"></div>
</header>

<main class="wrap">
  <div class="card">
    <h2 style="margin:0 0 6px;font-size:18px;font-weight:1100">Concepts (Multiple Choice) üß†</h2>
    <div class="tiny">Rule: say the answer in your head first. Then tap.</div>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="startBtn">Start</button>
      <button class="btn secondary" id="retryBtn" disabled>Retry</button>
    </div>
    <div class="meta">
      <div id="progress">Not started</div>
      <div id="score">Score: 0</div>
    </div>
  </div>

  <div id="quizArea"></div>

  <div class="card">
    <div class="tiny">Tip: if a wrong answer sounds ‚Äúkinda true,‚Äù that‚Äôs normal. It might answer a different question.</div>
  </div>
</main>

<script>
  // --- Concepts question pool (9 total) ---
  const CONCEPTS = [
    {
      q: "From where do plants get the atoms/molecules they need to grow, and how do they get them into the plant?",
      correct: "Plants get water and minerals from the soil through roots, and carbon dioxide from the air through stomata in leaves.",
      wrong: [
        "Plants get their food from the soil, and the roots pull sugar up into the leaves.",
        "Plants get energy from sunlight through their roots, then send it to the leaves to grow.",
        "Plants get nutrients by eating insects, and they absorb them through the petals."
      ]
    },
    {
      q: "Where do plants get the energy they need to make glucose (their food)?",
      correct: "Plants get energy from sunlight, which powers photosynthesis to make glucose.",
      wrong: [
        "Plants get energy from soil nutrients, which are turned into glucose in the roots.",
        "Plants get energy by breathing in oxygen and using it to create glucose.",
        "Plants get energy from decomposers breaking down dead matter near the plant."
      ]
    },
    {
      q: "How do mushrooms differ from plants?",
      correct: "Mushrooms (fungi) do not make their own food using sunlight; they get energy by breaking down or absorbing nutrients from other things.",
      wrong: [
        "Mushrooms make glucose using photosynthesis, just like green plants do.",
        "Mushrooms are animals, so they eat prey and digest it like predators.",
        "Mushrooms are a type of seed that grows into a plant when it gets enough sunlight."
      ]
    },
    {
      q: "What are some abiotic things and biotic things in an ecosystem?",
      correct: "Abiotic things are nonliving (water, air, sunlight, rocks), and biotic things are living (plants, animals, fungi, bacteria).",
      wrong: [
        "Abiotic things are animals, and biotic things are plants.",
        "Abiotic things are things that were once alive, like dead leaves and dead logs.",
        "Biotic things are only predators, and abiotic things are only prey."
      ]
    },
    {
      q: "What gases get exchanged between green plants (producers) and other organisms (consumers)?",
      correct: "Plants take in carbon dioxide and release oxygen; animals take in oxygen and release carbon dioxide.",
      wrong: [
        "Plants breathe in oxygen and breathe out carbon dioxide just like animals.",
        "Plants release nitrogen gas for animals to breathe, and animals release oxygen back to plants.",
        "Plants take in water vapor and release carbon dioxide through their roots."
      ]
    },
    {
      q: "What happens if you allow plants to grow too close together?",
      correct: "They compete for limited resources like light, water, and space, so some plants may grow poorly or die.",
      wrong: [
        "They always grow faster because being close together creates extra sunlight.",
        "They stop photosynthesis because roots cannot absorb oxygen from the air anymore.",
        "They turn into decomposers and begin breaking down the soil for nutrients."
      ]
    },
    {
      q: "How does water escape or leave from a plant?",
      correct: "Water leaves mainly through stomata in leaves as water vapor; this is called transpiration.",
      wrong: [
        "Water leaves through the roots and goes back into the air; this is called condensation.",
        "Water leaves when the plant makes glucose and releases liquid water; this is photosynthesis.",
        "Water leaves when xylem turns water into sugar and sends it out of the petals."
      ]
    },
    {
      q: "Why do plants grow toward the light or the sun?",
      correct: "Plants grow toward light to get more sunlight for photosynthesis; this is called phototropism.",
      wrong: [
        "Plants grow toward light because sunlight turns directly into minerals in the soil.",
        "Plants grow toward light because stomata need sunlight to open so roots can breathe.",
        "Plants grow toward light because decomposers pull them toward warmer ground."
      ]
    },
    {
      q: "How would you set up an experiment to prove a plant needs soil, water, and air to grow?",
      correct: "Use identical plants and change only one factor at a time (no soil vs soil, no water vs water, no air vs air) while keeping light and temperature the same.",
      wrong: [
        "Give one plant extra sunlight and keep the other in the dark to prove it needs soil, water, and air.",
        "Use different kinds of plants in different rooms so you can see which one grows tallest.",
        "Change soil, water, and air all at once so the results happen faster."
      ]
    }
  ];

  const startBtn = document.getElementById("startBtn");
  const retryBtn = document.getElementById("retryBtn");
  const quizArea = document.getElementById("quizArea");
  const progress = document.getElementById("progress");
  const scoreEl = document.getElementById("score");

  let quiz = [];
  let i = 0;
  let score = 0;

  function shuffle(arr){
    const a = arr.slice();
    for(let k=a.length-1;k>0;k--){
      const j = Math.floor(Math.random()*(k+1));
      [a[k],a[j]] = [a[j],a[k]];
    }
    return a;
  }

  function buildQuiz(){
    quiz = shuffle(CONCEPTS).map(item => {
      const choices = shuffle([item.correct, ...item.wrong]);
      return { q:item.q, correct:item.correct, choices };
    });
    i = 0;
    score = 0;
    scoreEl.textContent = "Score: 0";
    progress.textContent = `Question 1 of ${quiz.length}`;
    retryBtn.disabled = false;
    renderQ();
  }

  function renderQ(){
    const q = quiz[i];
    progress.textContent = `Question ${i+1} of ${quiz.length}`;

    quizArea.innerHTML = `
      <div class="q">
        <h3>${escapeHtml(q.q)}</h3>
        <div class="choices"></div>
        <div class="tiny">Tap an answer. We‚Äôll show the correct one.</div>
      </div>
    `;

    const choicesDiv = quizArea.querySelector(".choices");

    q.choices.forEach(choice => {
      const b = document.createElement("button");
      b.className = "choiceBtn";
      b.type = "button";
      b.textContent = choice;

      b.addEventListener("click", () => {
        const buttons = choicesDiv.querySelectorAll("button");
        buttons.forEach(x => x.disabled = true);

        if(choice === q.correct){
          b.classList.add("correct");
          score++;
          scoreEl.textContent = `Score: ${score}`;
        } else {
          b.classList.add("wrong");
          buttons.forEach(x => {
            if(x.textContent === q.correct) x.classList.add("correct");
          });
        }

        setTimeout(() => {
          i++;
          if(i >= quiz.length){
            progress.textContent = `Done! ${score} / ${quiz.length}`;
            quizArea.innerHTML = `
              <div class="q">
                <h3>Concepts Quiz Complete üéØ</h3>
                <div class="tiny">Score: <b>${score}</b> out of <b>${quiz.length}</b>.</div>
                <div class="tiny">Hit Retry to shuffle and practice again.</div>
              </div>
            `;
          } else {
            renderQ();
          }
        }, 650);
      });

      choicesDiv.appendChild(b);
    });
  }

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  startBtn.addEventListener("click", buildQuiz);
  retryBtn.addEventListener("click", buildQuiz);
</script>
</body>
</html>
